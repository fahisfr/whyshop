{"ast":null,"code":"import React,{useEffect}from'react';import'./RecomendDiv.css';import{useDispatch,useSelector}from'react-redux';import{fetchProduts}from'../../Features/Products';import{Link}from'react-router-dom';import Axios,{ImagePath}from'../../Axios';import{addToCart,changeProductQuantity,removeFromCart}from'../../Features/Cart';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function RecomendBar(props){var _useSelector=useSelector(function(state){return state.user.userInfo;}),isAuth=_useSelector.isAuth;var _useSelector2=useSelector(function(state){return state.products;}),products=_useSelector2.products;var dispatch=useDispatch();useEffect(function(){if(products.length===0){dispatch(fetchProduts());}},[products.length,dispatch]);var _useSelector3=useSelector(function(state){return state.cart;}),cartInfo=_useSelector3.cartInfo;var changeQuantity=function changeQuantity(quantity,id){dispatch(changeProductQuantity({id:id,quantity:quantity}));Axios.put(\"cart/change-product-quantity/\".concat(id),{quantity:quantity});};var AddTOCart=function AddTOCart(id,product){var name=product.name,price=product.price,imageId=product.imageId,type=product.type;dispatch(addToCart({_id:id,name:name,type:type,price:price,imageId:imageId,id:id,quantity:1}));Axios.put(\"cart/add-to-cart/\".concat(id));};var removeCartProduct=function removeCartProduct(id){dispatch(removeFromCart(id));Axios.put('cart/remove-product/'+id,{id:id});};return/*#__PURE__*/_jsx(\"div\",{className:\"recommend-products\",children:products.filter(function(res){return res.price>=props.pricelimit&&res.price<=props.pricemax||res.type===props.type;}).map(function(product,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"recommend-item\",children:[/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(product.name),children:/*#__PURE__*/_jsx(\"div\",{className:\"recommend-item-image\",children:/*#__PURE__*/_jsx(\"img\",{src:ImagePath(product.imageId),alt:\"loading\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"recommend-item-name\",children:/*#__PURE__*/_jsx(\"span\",{children:product.name})}),/*#__PURE__*/_jsx(\"div\",{className:\"recommend-item-pirce\",children:/*#__PURE__*/_jsxs(\"span\",{children:[product.price,\" kg\"]})}),cartInfo.find(function(res){return res._id===product._id;})?/*#__PURE__*/_jsxs(\"div\",{className:\"recommend-item-remove\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return removeCartProduct(product._id);},className:\"item-remove-button\",children:\"Remove\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return changeQuantity(-.5,product._id);},className:\"recommend-item-quantity-button\",style:{color:'red'},children:\"-\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"recommend-item-show-quantity\",children:[cartInfo.find(function(res){return res._id===product._id;}).quantity,/*#__PURE__*/_jsx(\"span\",{className:\"random-quantity-kg\",children:\" kg\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return changeQuantity(.5,product._id);},className:\"recommend-item-quantity-button\",children:\"+\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"recommend-item-addtocart\",children:isAuth?/*#__PURE__*/_jsx(\"button\",{className:\"item-add\",onClick:function onClick(){return AddTOCart(product._id,product);},children:\"Add to cart\"}):/*#__PURE__*/_jsx(Link,{to:\"/login\",children:/*#__PURE__*/_jsx(\"button\",{className:\"item-add\",children:\"Add to cart\"})})})]},index);})});}export default RecomendBar;","map":{"version":3,"sources":["/home/frboy/whyshop/client/src/Components/RecomendProducts/RecomendDIv.js"],"names":["React","useEffect","useDispatch","useSelector","fetchProduts","Link","Axios","ImagePath","addToCart","changeProductQuantity","removeFromCart","RecomendBar","props","state","user","userInfo","isAuth","products","dispatch","length","cart","cartInfo","changeQuantity","quantity","id","put","AddTOCart","product","name","price","imageId","type","_id","removeCartProduct","filter","res","pricelimit","pricemax","map","index","find","e","color"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAO,mBAAP,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,YAAT,KAA6B,yBAA7B,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,aAAjC,CACA,OAASC,SAAT,CAAoBC,qBAApB,CAA2CC,cAA3C,KAAiE,qBAAjE,C,wFAIA,QAASC,CAAAA,WAAT,CAAqBC,KAArB,CAA4B,kBACLT,WAAW,CAAC,SAAAU,KAAK,QAAIA,CAAAA,KAAK,CAACC,IAAN,CAAWC,QAAf,EAAN,CADN,CAChBC,MADgB,cAChBA,MADgB,mBAEHb,WAAW,CAAC,SAAAU,KAAK,QAAIA,CAAAA,KAAK,CAACI,QAAV,EAAN,CAFR,CAEhBA,QAFgB,eAEhBA,QAFgB,CAGxB,GAAMC,CAAAA,QAAQ,CAAGhB,WAAW,EAA5B,CAEAD,SAAS,CAAC,UAAM,CACZ,GAAIgB,QAAQ,CAACE,MAAT,GAAoB,CAAxB,CAA2B,CACvBD,QAAQ,CAACd,YAAY,EAAb,CAAR,CACH,CACJ,CAJQ,CAIN,CAACa,QAAQ,CAACE,MAAV,CAAiBD,QAAjB,CAJM,CAAT,CALwB,kBAUHf,WAAW,CAAC,SAAAU,KAAK,QAAIA,CAAAA,KAAK,CAACO,IAAV,EAAN,CAVR,CAUhBC,QAVgB,eAUhBA,QAVgB,CAWxB,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,QAAD,CAAWC,EAAX,CAAkB,CACrCN,QAAQ,CAACT,qBAAqB,CAAC,CAAEe,EAAE,CAAFA,EAAF,CAAMD,QAAQ,CAARA,QAAN,CAAD,CAAtB,CAAR,CACAjB,KAAK,CAACmB,GAAN,wCAA0CD,EAA1C,EAAgD,CAAED,QAAQ,CAARA,QAAF,CAAhD,EACH,CAHD,CAKA,GAAMG,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACF,EAAD,CAAKG,OAAL,CAAiB,IAEvBC,CAAAA,IAFuB,CAEQD,OAFR,CAEvBC,IAFuB,CAEjBC,KAFiB,CAEQF,OAFR,CAEjBE,KAFiB,CAEVC,OAFU,CAEQH,OAFR,CAEVG,OAFU,CAEDC,IAFC,CAEQJ,OAFR,CAEDI,IAFC,CAG/Bb,QAAQ,CAACV,SAAS,CAAC,CAAEwB,GAAG,CAAER,EAAP,CAAWI,IAAI,CAAJA,IAAX,CAAiBG,IAAI,CAAJA,IAAjB,CAAuBF,KAAK,CAALA,KAAvB,CAA8BC,OAAO,CAAPA,OAA9B,CAAuCN,EAAE,CAAFA,EAAvC,CAA2CD,QAAQ,CAAE,CAArD,CAAD,CAAV,CAAR,CACAjB,KAAK,CAACmB,GAAN,4BAA8BD,EAA9B,GACH,CALD,CAOA,GAAMS,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAAAT,EAAE,CAAI,CAC5BN,QAAQ,CAACR,cAAc,CAACc,EAAD,CAAf,CAAR,CACAlB,KAAK,CAACmB,GAAN,CAAU,uBAAyBD,EAAnC,CAAuC,CAAEA,EAAE,CAAEA,EAAN,CAAvC,EACH,CAHD,CAKA,mBACI,YAAK,SAAS,CAAC,oBAAf,UAEQP,QAAQ,CAACiB,MAAT,CAAgB,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACN,KAAJ,EAAajB,KAAK,CAACwB,UAAnB,EAAiCD,GAAG,CAACN,KAAJ,EAAajB,KAAK,CAACyB,QAApD,EAAgEF,GAAG,CAACJ,IAAJ,GAAanB,KAAK,CAACmB,IAAvF,EAAnB,EAAgHO,GAAhH,CAAoH,SAACX,OAAD,CAAUY,KAAV,CAAoB,CACpI,mBACI,aAAK,SAAS,CAAC,gBAAf,wBACI,KAAC,IAAD,EAAM,EAAE,oBAAcZ,OAAO,CAACC,IAAtB,CAAR,uBACI,YAAK,SAAS,CAAC,sBAAf,uBACI,YAAK,GAAG,CAAErB,SAAS,CAACoB,OAAO,CAACG,OAAT,CAAnB,CAAsC,GAAG,CAAC,SAA1C,EADJ,EADJ,EADJ,cAMI,YAAK,SAAS,CAAC,qBAAf,uBACI,sBAAOH,OAAO,CAACC,IAAf,EADJ,EANJ,cASI,YAAK,SAAS,CAAC,sBAAf,uBACI,wBAAOD,OAAO,CAACE,KAAf,SADJ,EATJ,CAeQR,QAAQ,CAACmB,IAAT,CAAc,SAAAL,GAAG,QAAIA,CAAAA,GAAG,CAACH,GAAJ,GAAYL,OAAO,CAACK,GAAxB,EAAjB,eACI,aAAK,SAAS,CAAC,uBAAf,wBACI,eAAQ,OAAO,CAAE,yBAAMC,CAAAA,iBAAiB,CAACN,OAAO,CAACK,GAAT,CAAvB,EAAjB,CAAuD,SAAS,CAAC,oBAAjE,oBADJ,cAEI,eAAQ,OAAO,CAAE,iBAACS,CAAD,QAAOnB,CAAAA,cAAc,CAAC,CAAC,EAAF,CAAMK,OAAO,CAACK,GAAd,CAArB,EAAjB,CAA0D,SAAS,CAAC,gCAApE,CAAqG,KAAK,CAAE,CAAEU,KAAK,CAAE,KAAT,CAA5G,eAFJ,cAGI,cAAM,SAAS,CAAC,8BAAhB,WAAgDrB,QAAQ,CAACmB,IAAT,CAAc,SAAAL,GAAG,QAAIA,CAAAA,GAAG,CAACH,GAAJ,GAAYL,OAAO,CAACK,GAAxB,EAAjB,EAA8CT,QAA9F,cAAuG,aAAM,SAAS,CAAC,oBAAhB,iBAAvG,GAHJ,cAII,eAAQ,OAAO,CAAE,iBAACkB,CAAD,QAAOnB,CAAAA,cAAc,CAAC,EAAD,CAAKK,OAAO,CAACK,GAAb,CAArB,EAAjB,CAAyD,SAAS,CAAC,gCAAnE,eAJJ,GADJ,cAOI,YAAK,SAAS,CAAC,0BAAf,UACIhB,MAAM,cAAG,eAAQ,SAAS,CAAC,UAAlB,CAA6B,OAAO,CAAE,yBAAMU,CAAAA,SAAS,CAACC,OAAO,CAACK,GAAT,CAAcL,OAAd,CAAf,EAAtC,yBAAH,cACF,KAAC,IAAD,EAAM,EAAE,CAAC,QAAT,uBAAmB,eAAQ,SAAS,CAAC,UAAlB,yBAAnB,EAFR,EAtBZ,GAAqCY,KAArC,CADJ,CAkCH,CAnCD,CAFR,EADJ,CA4CH,CAED,cAAe5B,CAAAA,WAAf","sourcesContent":["import React, { useEffect } from 'react'\nimport './RecomendDiv.css'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { fetchProduts } from '../../Features/Products'\nimport { Link } from 'react-router-dom'\nimport Axios, { ImagePath } from '../../Axios'\nimport { addToCart, changeProductQuantity, removeFromCart } from '../../Features/Cart'\n\n\n\nfunction RecomendBar(props) {\n    const { isAuth } = useSelector(state => state.user.userInfo)\n    const { products } = useSelector(state => state.products)\n    const dispatch = useDispatch()\n    \n    useEffect(() => {\n        if (products.length === 0) {\n            dispatch(fetchProduts())\n        }\n    }, [products.length,dispatch])\n    const { cartInfo } = useSelector(state => state.cart)\n    const changeQuantity = (quantity, id) => {\n        dispatch(changeProductQuantity({ id, quantity }))\n        Axios.put(`cart/change-product-quantity/${id}`, { quantity })\n    }\n\n    const AddTOCart = (id, product) => {\n\n        const { name, price, imageId, type } = product\n        dispatch(addToCart({ _id: id, name, type, price, imageId, id, quantity: 1 }))\n        Axios.put(`cart/add-to-cart/${id}`)\n    }\n\n    const removeCartProduct = id => {\n        dispatch(removeFromCart(id))\n        Axios.put('cart/remove-product/' + id, { id: id })\n    }\n\n    return (\n        <div className='recommend-products'>\n            {\n                products.filter(res => res.price >= props.pricelimit && res.price <= props.pricemax || res.type === props.type).map((product, index) => {\n                    return (\n                        <div className='recommend-item' key={index} >\n                            <Link to={`/product/${product.name}`}>\n                                <div className='recommend-item-image'>\n                                    <img src={ImagePath(product.imageId)} alt='loading' />\n                                </div>\n                            </Link>\n                            <div className='recommend-item-name' >\n                                <span>{product.name}</span>\n                            </div>\n                            <div className='recommend-item-pirce'>\n                                <span>{product.price} kg</span>\n                            </div>\n                            {\n                                \n\n                                cartInfo.find(res => res._id === product._id) ?\n                                    <div className='recommend-item-remove'>\n                                        <button onClick={() => removeCartProduct(product._id)} className='item-remove-button'>Remove</button >\n                                        <button onClick={(e) => changeQuantity(-.5, product._id)} className=\"recommend-item-quantity-button\" style={{ color: 'red' }}>-</button>\n                                        <span className='recommend-item-show-quantity'>{cartInfo.find(res => res._id === product._id).quantity}<span className='random-quantity-kg'> kg</span></span>\n                                        <button onClick={(e) => changeQuantity(.5, product._id)} className=\"recommend-item-quantity-button\">+</button>\n                                    </div> :\n                                    <div className='recommend-item-addtocart'>{\n                                        isAuth ? <button className='item-add' onClick={() => AddTOCart(product._id, product)} >Add to cart</button> :\n                                            <Link to='/login' ><button className='item-add'>Add to cart</button></Link>\n                                    }\n\n                                        </div>\n                                   \n\n                            }\n                        </div>\n                    )\n                })\n\n            }\n\n        </div >\n    )\n}\n\nexport default RecomendBar\n"]},"metadata":{},"sourceType":"module"}