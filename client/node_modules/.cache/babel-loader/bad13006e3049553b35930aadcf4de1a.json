{"ast":null,"code":"import axios from 'axios';\nconst baseURL = 'https://frbots.com/';\nexport const ImagePath = imageId => `${baseURL}images/`;\n_c = ImagePath;\nconst instance = axios.create({\n  baseURL: `${baseURL}api/`,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\ninstance.interceptors.request.use(config => {\n  const token = localStorage.getItem('accesstoken');\n\n  if (token) {\n    config.headers.authorization = token;\n  }\n\n  return config;\n});\ninstance.interceptors.response.use(response => response, async error => {\n  var _error$response;\n\n  const prevRequest = error.config;\n\n  if ((error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 403) {\n    prevRequest.sent = true;\n    const {\n      data\n    } = await instance.put('/auth/refreshtoken');\n\n    if (data !== null && data !== void 0 && data.status) {\n      localStorage.setItem('accesstoken', data.accesstoken);\n    }\n\n    return instance(prevRequest);\n  }\n\n  return Promise.reject(error);\n});\nexport default instance;\n\nvar _c;\n\n$RefreshReg$(_c, \"ImagePath\");","map":{"version":3,"sources":["/home/frboy/whyshop/client/src/Axios.js"],"names":["axios","baseURL","ImagePath","imageId","instance","create","headers","interceptors","request","use","config","token","localStorage","getItem","authorization","response","error","prevRequest","status","sent","data","put","setItem","accesstoken","Promise","reject"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,MAAMC,OAAO,GAAG,qBAAhB;AAEA,OAAO,MAAMC,SAAS,GAAIC,OAAD,IAAc,GAAEF,OAAQ,SAA1C;KAAMC,S;AAEb,MAAME,QAAQ,GAAGJ,KAAK,CAACK,MAAN,CAAa;AAC1BJ,EAAAA,OAAO,EAAG,GAAEA,OAAQ,MADM;AAE1BK,EAAAA,OAAO,EAAE;AACL,oBAAgB;AADX;AAFiB,CAAb,CAAjB;AAOAF,QAAQ,CAACG,YAAT,CAAsBC,OAAtB,CAA8BC,GAA9B,CAAkCC,MAAM,IAAI;AACxC,QAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAd;;AACA,MAAIF,KAAJ,EAAW;AACPD,IAAAA,MAAM,CAACJ,OAAP,CAAeQ,aAAf,GAA+BH,KAA/B;AACH;;AACD,SAAOD,MAAP;AACH,CAND;AAQAN,QAAQ,CAACG,YAAT,CAAsBQ,QAAtB,CAA+BN,GAA/B,CACIM,QAAQ,IAAIA,QADhB,EAEI,MAAMC,KAAN,IAAe;AAAA;;AACX,QAAMC,WAAW,GAAGD,KAAK,CAACN,MAA1B;;AACA,MAAI,CAAAM,KAAK,SAAL,IAAAA,KAAK,WAAL,+BAAAA,KAAK,CAAED,QAAP,oEAAiBG,MAAjB,MAA4B,GAAhC,EAAqC;AACjCD,IAAAA,WAAW,CAACE,IAAZ,GAAiB,IAAjB;AACA,UAAM;AAAEC,MAAAA;AAAF,QAAW,MAAMhB,QAAQ,CAACiB,GAAT,CAAa,oBAAb,CAAvB;;AACA,QAAID,IAAJ,aAAIA,IAAJ,eAAIA,IAAI,CAAEF,MAAV,EAAkB;AACfN,MAAAA,YAAY,CAACU,OAAb,CAAqB,aAArB,EAAoCF,IAAI,CAACG,WAAzC;AACF;;AACD,WAAOnB,QAAQ,CAACa,WAAD,CAAf;AACH;;AACD,SAAOO,OAAO,CAACC,MAAR,CAAeT,KAAf,CAAP;AACH,CAbL;AAkBA,eAAeZ,QAAf","sourcesContent":["import axios from 'axios';\n\nconst baseURL = 'https://frbots.com/';\n\nexport const ImagePath = (imageId) => `${baseURL}images/`;\n\nconst instance = axios.create({\n    baseURL: `${baseURL}api/`,\n    headers: {\n        'Content-Type': 'application/json',\n    }\n});\n\ninstance.interceptors.request.use(config => {\n    const token = localStorage.getItem('accesstoken');\n    if (token) {\n        config.headers.authorization = token;\n    }\n    return config;\n})\n\ninstance.interceptors.response.use(\n    response => response,\n    async error => {\n        const prevRequest = error.config;\n        if (error?.response?.status === 403) {\n            prevRequest.sent=true;\n            const { data } = await instance.put('/auth/refreshtoken')\n            if (data?.status) {\n               localStorage.setItem('accesstoken', data.accesstoken) \n            }\n            return instance(prevRequest);\n        }\n        return Promise.reject(error);\n    }\n);\n\n\n\nexport default instance"]},"metadata":{},"sourceType":"module"}