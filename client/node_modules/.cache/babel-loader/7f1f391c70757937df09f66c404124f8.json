{"ast":null,"code":"import _slicedToArray from\"/home/frboy/whyshop/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import'./RecommendDiv.css';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';import Axios,{ImagePath}from'../../Axios';import{addToCart,changeProductQuantity,removeFromCart}from'../../Features/Cart';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function RecommendBar(_ref){var type=_ref.type;var _useSelector=useSelector(function(state){return state.user.userInfo;}),isAuth=_useSelector.isAuth;var _useSelector2=useSelector(function(state){return state.products;}),products=_useSelector2.products;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),recommend=_useState2[0],setRecommend=_useState2[1];var dispatch=useDispatch();useEffect(function(){var filterProducts=function filterProducts(){if(type){return products.filter(function(product){return product.type===type;});}else{var randomProducts=[];for(var i=0;i<10;i++){randomProducts.push(products[Math.floor(Math.random()*products.length)]);}return randomProducts;}};setRecommend(filterProducts());},[type,products]);var _useSelector3=useSelector(function(state){return state.cart;}),cartInfo=_useSelector3.cartInfo;var changeQuantity=function changeQuantity(quantity,id){dispatch(changeProductQuantity({id:id,quantity:quantity}));Axios.put(\"cart/change-product-quantity/\".concat(id),{quantity:quantity});};var AddTOCart=function AddTOCart(id,product){var name=product.name,price=product.price,imageId=product.imageId,type=product.type;dispatch(addToCart({_id:id,name:name,type:type,price:price,imageId:imageId,id:id,quantity:1}));Axios.put(\"cart/add-to-cart/\".concat(id));};var removeCartProduct=function removeCartProduct(id){dispatch(removeFromCart(id));Axios.put('cart/remove-product/'+id,{id:id});};return/*#__PURE__*/_jsx(\"div\",{className:\"recommend-products\",children:recommend.map(function(product,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"recommend-item\",children:[/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(product===null||product===void 0?void 0:product.name),children:/*#__PURE__*/_jsx(\"div\",{className:\"recommend-item-image\",children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(ImagePath+(product===null||product===void 0?void 0:product.imageId),\".jpg\"),alt:\"loading\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"recommend-item-name\",children:/*#__PURE__*/_jsx(\"span\",{children:product===null||product===void 0?void 0:product.name})}),/*#__PURE__*/_jsx(\"div\",{className:\"recommend-item-pirce\",children:/*#__PURE__*/_jsxs(\"span\",{children:[product===null||product===void 0?void 0:product.price,\" kg\"]})}),cartInfo.find(function(res){return res._id===product._id;})?/*#__PURE__*/_jsxs(\"div\",{className:\"recommend-item-remove\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return removeCartProduct(product._id);},className:\"item-remove-button\",children:\"Remove\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return changeQuantity(-.5,product._id);},className:\"recommend-item-quantity-button\",style:{color:'red'},children:\"-\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"recommend-item-show-quantity\",children:[cartInfo.find(function(res){return res._id===product._id;}).quantity,/*#__PURE__*/_jsx(\"span\",{className:\"random-quantity-kg\",children:\" kg\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return changeQuantity(.5,product._id);},className:\"recommend-item-quantity-button\",children:\"+\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"recommend-item-addtocart\",children:isAuth?/*#__PURE__*/_jsx(\"button\",{className:\"item-add\",onClick:function onClick(){return AddTOCart(product._id,product);},children:\"Add to cart\"}):/*#__PURE__*/_jsx(Link,{to:\"/login\",children:/*#__PURE__*/_jsx(\"button\",{className:\"item-add\",children:\"Add to cart\"})})})]},index);})});}export default RecommendBar;","map":{"version":3,"sources":["/home/frboy/whyshop/client/src/Components/RecommendProducts/RecommendDIv.js"],"names":["React","useEffect","useState","useDispatch","useSelector","Link","Axios","ImagePath","addToCart","changeProductQuantity","removeFromCart","RecommendBar","type","state","user","userInfo","isAuth","products","recommend","setRecommend","dispatch","filterProducts","filter","product","randomProducts","i","push","Math","floor","random","length","cart","cartInfo","changeQuantity","quantity","id","put","AddTOCart","name","price","imageId","_id","removeCartProduct","map","index","find","res","e","color"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport './RecommendDiv.css'\nimport { useDispatch, useSelector } from 'react-redux'\n\nimport { Link } from 'react-router-dom'\nimport Axios, { ImagePath } from '../../Axios'\nimport { addToCart, changeProductQuantity, removeFromCart } from '../../Features/Cart'\n\n\n\nfunction RecommendBar({ type }) {\n    const { isAuth } = useSelector(state => state.user.userInfo)\n    const { products } = useSelector(state => state.products)\n    const [recommend, setRecommend] = useState([])\n    const dispatch = useDispatch()\n\n\n\n    useEffect(() => {\n        const filterProducts = () => {\n            if (type) {\n                return products.filter(product => product.type === type)\n            } else {\n                let randomProducts = []\n\n                for (let i = 0; i < 10; i++) {\n                    randomProducts.push(products[Math.floor(Math.random()*products.length)])\n                }\n                return randomProducts\n            }\n        }\n        setRecommend(filterProducts())\n\n    },[type,products])\n\n\n    const { cartInfo } = useSelector(state => state.cart)\n    const changeQuantity = (quantity, id) => {\n        dispatch(changeProductQuantity({ id, quantity }))\n        Axios.put(`cart/change-product-quantity/${id}`, { quantity })\n    }\n\n    const AddTOCart = (id, product) => {\n\n        const { name, price, imageId, type } = product\n        dispatch(addToCart({ _id: id, name, type, price, imageId, id, quantity: 1 }))\n        Axios.put(`cart/add-to-cart/${id}`)\n    }\n\n    const removeCartProduct = id => {\n        dispatch(removeFromCart(id))\n        Axios.put('cart/remove-product/' + id, { id: id })\n    }\n\n    return (\n        <div className='recommend-products'>\n            {\n                recommend.map((product, index) => {\n                    return (\n                        <div className='recommend-item' key={index} >\n                            <Link to={`/product/${product?.name}`}>\n                                <div className='recommend-item-image'>\n                                    <img src={`${ImagePath+product?.imageId}.jpg` } alt='loading' />\n                                </div>\n                            </Link>\n                            <div className='recommend-item-name' >\n                                <span>{product?.name}</span>\n                            </div>\n                            <div className='recommend-item-pirce'>\n                                <span>{product?.price} kg</span>\n                            </div>\n                            {\n\n                                cartInfo.find(res => res._id === product._id) ?\n                                    <div className='recommend-item-remove'>\n                                        <button onClick={() => removeCartProduct(product._id)} className='item-remove-button'>Remove</button >\n                                        <button onClick={(e) => changeQuantity(-.5, product._id)} className=\"recommend-item-quantity-button\" style={{ color: 'red' }}>-</button>\n                                        <span className='recommend-item-show-quantity'>{cartInfo.find(res => res._id === product._id).quantity}<span className='random-quantity-kg'> kg</span></span>\n                                        <button onClick={(e) => changeQuantity(.5, product._id)} className=\"recommend-item-quantity-button\">+</button>\n                                    </div> :\n                                    <div className='recommend-item-addtocart'>{\n                                        isAuth ? <button className='item-add' onClick={() => AddTOCart(product._id, product)} >Add to cart</button> :\n                                            <Link to='/login' ><button className='item-add'>Add to cart</button></Link>\n                                    }\n\n                                    </div>\n\n\n                            }\n                        </div>\n                    )\n                })\n\n            }\n\n        </div >\n    )\n}\n\nexport default RecommendBar\n"]},"metadata":{},"sourceType":"module"}