{"ast":null,"code":"import React,{useEffect}from'react';import'./RecomendDiv.css';import{useDispatch,useSelector}from'react-redux';import{fetchProduts}from'../../Features/Products';import{useNavigate,Link}from'react-router-dom';import Axios,{ImagePath}from'../../Axios';import{addToCart,changeProductQuantity,removeFromCart}from'../../Features/Cart';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function RecomendBar(props){var history=useNavigate();var _useSelector=useSelector(function(state){return state.products;}),products=_useSelector.products;var dispatch=useDispatch();var _useSelector2=useSelector(function(state){return state.cart;}),cartInfo=_useSelector2.cartInfo;useEffect(function(){dispatch(fetchProduts());},[dispatch]);var changeQuantity=function changeQuantity(quantity,id){dispatch(changeProductQuantity({id:id,quantity:quantity}));Axios.put(\"cart/change-product-quantity/\".concat(id),{quantity:quantity}).then(function(res){if(res.data.status){}});};function AddTOCart(id,product){var name=product.name,price=product.price,imageId=product.imageId,type=product.type;dispatch(addToCart({_id:id,name:name,type:type,price:price,imageId:imageId,id:id,quantity:1}));Axios.put(\"cart/add-to-cart/\".concat(id)).then(function(res){// if (res.data.status) {\n//     dispatch(addToCart({ _id: id, name,type,price, imageId, id, quantity: 1 }))\n// }\n});}var removeCartProduct=function removeCartProduct(id){dispatch(removeFromCart(id));Axios.put('cart/remove-product/'+id,{id:id}).then(function(res){if(res.data.status){}});};return/*#__PURE__*/_jsx(\"div\",{className:\"recommend-products\",children:products.filter(function(res){return res.price>=props.pricelimit&&res.price<=props.pricemax;}).map(function(product,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"recommend-item\",children:[/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(product.name),children:/*#__PURE__*/_jsx(\"div\",{className:\"recommend-item-image\",children:/*#__PURE__*/_jsx(\"img\",{src:ImagePath(product.imageId),alt:\"loading\",onClick:function onClick(){return history('/');}})})}),/*#__PURE__*/_jsx(\"div\",{className:\"recommend-item-name\",children:/*#__PURE__*/_jsx(\"span\",{children:product.name})}),/*#__PURE__*/_jsx(\"div\",{className:\"recommend-item-pirce\",children:/*#__PURE__*/_jsxs(\"span\",{children:[product.price,\" kg\"]})}),cartInfo.find(function(res){return res._id===product._id;})?/*#__PURE__*/_jsxs(\"div\",{className:\"recommend-item-remove\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return removeCartProduct(product._id);},className:\"item-remove-button\",children:\"Remove\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return changeQuantity(-.5,product._id);},className:\"recommend-item-quantity-button\",style:{color:'red'},children:\"-\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"recommend-item-show-quantity\",children:[cartInfo.find(function(res){return res._id===product._id;}).quantity,/*#__PURE__*/_jsx(\"span\",{className:\"random-quantity-kg\",children:\" kg\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return changeQuantity(.5,product._id);},className:\"recommend-item-quantity-button\",children:\"+\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"recommend-item-addtocart\",children:/*#__PURE__*/_jsx(\"button\",{className:\"item-add\",onClick:function onClick(){return AddTOCart(product._id,product);},children:\"Add to cart\"})})]},index);})});}export default RecomendBar;","map":{"version":3,"sources":["/home/frboy/whyshop/cliend/src/Components/RecomendProducts/RecomendDIv.js"],"names":["React","useEffect","useDispatch","useSelector","fetchProduts","useNavigate","Link","Axios","ImagePath","addToCart","changeProductQuantity","removeFromCart","RecomendBar","props","history","state","products","dispatch","cart","cartInfo","changeQuantity","quantity","id","put","then","res","data","status","AddTOCart","product","name","price","imageId","type","_id","removeCartProduct","filter","pricelimit","pricemax","map","index","find","e","color"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\nimport './RecomendDiv.css'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { fetchProduts } from '../../Features/Products'\nimport {useNavigate ,Link} from 'react-router-dom'\nimport Axios, { ImagePath } from '../../Axios'\nimport { addToCart, changeProductQuantity,removeFromCart} from '../../Features/Cart'\n\n\n\n\n\n\nfunction RecomendBar(props) {\n    const history = useNavigate()\n    const { products} = useSelector(state => state.products)\n    const dispatch = useDispatch()\n    const { cartInfo } = useSelector(state => state.cart)\n   \n    useEffect(() => {\n        dispatch(fetchProduts())\n    }, [dispatch])\n    const changeQuantity = (quantity, id) => {\n        dispatch(changeProductQuantity({ id, quantity }))\n        Axios.put(`cart/change-product-quantity/${id}`, { quantity }).then(res => {\n            if (res.data.status) {\n\n            }\n        })\n    }\n    function AddTOCart(id, product) {\n        const { name, price, imageId, type } = product\n        dispatch(addToCart({ _id: id, name, type, price, imageId, id, quantity: 1 }))\n        Axios.put(`cart/add-to-cart/${id}`).then(res => {\n            // if (res.data.status) {\n            //     dispatch(addToCart({ _id: id, name,type,price, imageId, id, quantity: 1 }))\n            // }\n        })\n    }\n    const removeCartProduct = id => {\n        dispatch(removeFromCart(id))\n        Axios.put('cart/remove-product/' + id, { id: id }).then(res => {\n            if (res.data.status) {\n                \n            }\n        })\n    }\n   \n    \n    return (\n        <div className='recommend-products'>\n            {\n                products.filter(res => res.price >= props.pricelimit && res.price <= props.pricemax).map((product, index) => {\n                    return (\n                        <div className='recommend-item' key={index} >\n                            <Link to={`/product/${product.name}`}>\n                                <div className='recommend-item-image'>\n                                    <img src={ImagePath(product.imageId)} alt='loading' onClick={() => history('/')} />\n                                </div>\n                            </Link>\n                           \n                            <div className='recommend-item-name' >\n                                <span>{product.name}</span>\n                            </div>\n                            <div className='recommend-item-pirce'>\n                                <span>{product.price} kg</span>\n                            </div>\n                            {\n                              \n                                cartInfo.find(res => res._id === product._id) ?\n                                    <div className='recommend-item-remove'>\n                                        <button onClick={()=>removeCartProduct(product._id)} className='item-remove-button'>Remove</button >\n                                        <button onClick={(e) => changeQuantity(-.5, product._id)} className=\"recommend-item-quantity-button\" style={{ color: 'red' }}>-</button>\n                                        <span className='recommend-item-show-quantity'>{cartInfo.find(res => res._id === product._id).quantity}<span className='random-quantity-kg'> kg</span></span>\n                                        <button onClick={(e) => changeQuantity(.5, product._id)} className=\"recommend-item-quantity-button\">+</button>\n                                    </div> :\n                                    <div className='recommend-item-addtocart'>\n                                        <button className='item-add' onClick={() => AddTOCart(product._id, product)} >Add to cart</button>\n                                    </div>\n                                 \n                }\n                            </div>\n                    )\n                })\n            }\n\n        </div >\n    )\n}\n\nexport default RecomendBar\n"]},"metadata":{},"sourceType":"module"}