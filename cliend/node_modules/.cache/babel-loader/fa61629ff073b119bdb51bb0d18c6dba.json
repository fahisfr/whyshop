{"ast":null,"code":"import _slicedToArray from\"/home/frboy/whyshop/cliend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import NavBar from'../../Components/Navbar/NavBar';import'./Shop.css';import{Link}from'react-router-dom';import{useParams}from'react-router-dom';import Axios,{ImagePath}from'../../Axios';import{useSelector,useDispatch}from'react-redux';import{changeProductQuantity,addToCart,removeFromCart}from'../../Features/Cart';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Products(){var _useParams=useParams(),id=_useParams.id;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setproducts=_useState2[1];var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.cart;}),cartInfo=_useSelector.cartInfo;useEffect(function(){Axios.get('/shop/'+id).then(function(result){if(result.data.product){setproducts(result.data.product);}});},[id]);var changeQuantity=function changeQuantity(quantity,id){dispatch(changeProductQuantity({id:id,quantity:quantity}));Axios.put(\"cart/change-product-quantity/\".concat(id),{quantity:quantity}).then(function(res){if(res.data.status){}});};function AddTOCart(id,product){var name=product.name,price=product.price,imageId=product.imageId,type=product.type;dispatch(addToCart({_id:id,name:name,type:type,price:price,imageId:imageId,id:id,quantity:1}));Axios.put(\"cart/add-to-cart/\".concat(id)).then(function(res){// if (res.data.status) {\n//     dispatch(addToCart({ _id: id, name,type,price, imageId, id, quantity: 1 }))\n// }\n});}var removeCartProduct=function removeCartProduct(id){dispatch(removeFromCart(id));Axios.put('cart/remove-product/'+id,{id:id}).then(function(res){if(res.data.status){}});};return/*#__PURE__*/_jsxs(\"div\",{className:\"shop-main\",children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"shop-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"shop-1-helper\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"shop-2-products\",children:[products.map(function(product,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"shop-2-item\",children:[/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(product.name),children:/*#__PURE__*/_jsx(\"div\",{className:\"shop-2-item-image\",children:/*#__PURE__*/_jsx(\"img\",{src:ImagePath(product.imageId),alt:\"loading\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"shop-2-item-name\",children:/*#__PURE__*/_jsx(\"span\",{children:product.name})}),/*#__PURE__*/_jsx(\"div\",{className:\"shop-2-item-pirce\",children:/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20B9\",product.price,\".kg\"]})}),cartInfo.find(function(res){return res._id===product._id;})?/*#__PURE__*/_jsxs(\"div\",{className:\"shop-item-remove\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return removeCartProduct(product._id);},className:\"shop-item-remove-button\",children:\"Remove\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return changeQuantity(-.5,product._id);},className:\"shop-item-quantity-button\",style:{color:'red'},children:\"-\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"shop-item-show-quantity\",children:[cartInfo.find(function(res){return res._id===product._id;}).quantity,/*#__PURE__*/_jsx(\"span\",{children:\" kg\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return changeQuantity(.5,product._id);},className:\"shop-item-quantity-button\",children:\"+\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"shop-2-item-add2cart\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return AddTOCart(product._id,product);},children:\"Add to cart\"})})]},index);}),/*#__PURE__*/_jsx(\"div\",{})]})]})]});}export default Products;","map":{"version":3,"sources":["/home/frboy/whyshop/cliend/src/Page/Shop/Shop.js"],"names":["React","useEffect","useState","NavBar","Link","useParams","Axios","ImagePath","useSelector","useDispatch","changeProductQuantity","addToCart","removeFromCart","Products","id","products","setproducts","dispatch","state","cart","cartInfo","get","then","result","data","product","changeQuantity","quantity","put","res","status","AddTOCart","name","price","imageId","type","_id","removeCartProduct","map","index","find","e","color"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport NavBar from '../../Components/Navbar/NavBar'\nimport './Shop.css'\nimport {Link} from 'react-router-dom'\nimport { useParams } from 'react-router-dom'\nimport Axios, { ImagePath } from '../../Axios'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { changeProductQuantity, addToCart, removeFromCart } from '../../Features/Cart'\n\nfunction Products() {\n    const { id } = useParams();\n    const [products, setproducts] = useState([])\n    const dispatch = useDispatch()\n    const { cartInfo } = useSelector(state => state.cart)\n\n\n    useEffect(() => {\n        Axios.get('/shop/' + id).then((result) => {\n            if (result.data.product) {\n                setproducts(result.data.product)\n\n            }\n        })\n    }, [id])\n\n    const changeQuantity = (quantity, id) => {\n        dispatch(changeProductQuantity({ id, quantity }))\n        Axios.put(`cart/change-product-quantity/${id}`, { quantity }).then(res => {\n            if (res.data.status) {\n\n            }\n        })\n    }\n    function AddTOCart(id, product) {\n        const { name, price, imageId, type } = product\n        dispatch(addToCart({ _id: id, name, type, price, imageId, id, quantity: 1 }))\n        Axios.put(`cart/add-to-cart/${id}`).then(res => {\n            // if (res.data.status) {\n            //     dispatch(addToCart({ _id: id, name,type,price, imageId, id, quantity: 1 }))\n            // }\n        })\n    }\n    const removeCartProduct = id => {\n        dispatch(removeFromCart(id))\n        Axios.put('cart/remove-product/' + id, { id: id }).then(res => {\n            if (res.data.status) {\n\n            }\n        })\n    }\n\n    return (\n        <div className='shop-main'>\n            <NavBar />\n            <div className='shop-container'>\n                <div className='shop-1-helper'>\n                </div>\n                <div className='shop-2-products'>\n                    {products.map((product, index) => {\n                        return (\n                            <div className='shop-2-item' key={index} >\n                                <Link to={`/product/${product.name}`}>\n                                    <div className='shop-2-item-image'>\n                                        <img src={ImagePath(product.imageId)} alt='loading' />\n                                    </div>\n                                </Link>\n                                <div className='shop-2-item-name'>\n                                    <span>{product.name}</span>\n                                </div>\n                                <div className='shop-2-item-pirce'>\n                                    <span>â‚¹{product.price}.kg</span>\n                                </div>\n                                {\n                                    cartInfo.find(res => res._id === product._id) ?\n                                        <div className='shop-item-remove'>\n                                            <button onClick={() => removeCartProduct(product._id)} className='shop-item-remove-button'>Remove</button >\n                                            <button onClick={(e) => changeQuantity(-.5, product._id)} className=\"shop-item-quantity-button\" style={{ color: 'red' }}>-</button>\n                                            <span className='shop-item-show-quantity'>{cartInfo.find(res => res._id === product._id).quantity}<span> kg</span></span>\n                                            <button onClick={(e) => changeQuantity(.5, product._id)} className=\"shop-item-quantity-button\">+</button>\n                                        </div> :\n                                        <div className='shop-2-item-add2cart'>\n                                            <button onClick={() => AddTOCart(product._id, product)}>Add to cart</button>\n                                        </div>\n\n                                }\n                            </div>\n\n                        )\n                    })}\n\n\n                    <div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n    )\n}\n\nexport default Products\n"]},"metadata":{},"sourceType":"module"}