{"ast":null,"code":"import _asyncToGenerator from\"/home/frboy/whyshop/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/home/frboy/whyshop/client/node_modules/@babel/runtime/regenerator/index.js\";import axios from'axios';var baseURL='https://frbots.com/';export var ImagePath=\"\".concat(baseURL,\"images/\");var instance=axios.create({baseURL:\"\".concat(baseURL,\"api/\"),headers:{'Content-Type':'application/json'}});instance.interceptors.request.use(function(config){var token=localStorage.getItem('accesstoken');if(token){config.headers.authorization=token;}return config;});instance.interceptors.response.use(function(response){return response;},/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(error){var _error$response;var prevRequest,_yield$instance$put,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:prevRequest=error.config;if(!((error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===403)){_context.next=9;break;}prevRequest.sent=true;_context.next=5;return instance.put('/auth/refreshtoken');case 5:_yield$instance$put=_context.sent;data=_yield$instance$put.data;if(data!==null&&data!==void 0&&data.status){localStorage.setItem('accesstoken',data.accesstoken);}return _context.abrupt(\"return\",instance(prevRequest));case 9:return _context.abrupt(\"return\",Promise.reject(error));case 10:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());export default instance;","map":{"version":3,"sources":["/home/frboy/whyshop/client/src/Axios.js"],"names":["axios","baseURL","ImagePath","instance","create","headers","interceptors","request","use","config","token","localStorage","getItem","authorization","response","error","prevRequest","status","sent","put","data","setItem","accesstoken","Promise","reject"],"mappings":"mOAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,GAAMC,CAAAA,OAAO,CAAG,qBAAhB,CAEA,MAAO,IAAMC,CAAAA,SAAS,WAAMD,OAAN,WAAf,CAEP,GAAME,CAAAA,QAAQ,CAAGH,KAAK,CAACI,MAAN,CAAa,CAC1BH,OAAO,WAAKA,OAAL,QADmB,CAE1BI,OAAO,CAAE,CACL,eAAgB,kBADX,CAFiB,CAAb,CAAjB,CAOAF,QAAQ,CAACG,YAAT,CAAsBC,OAAtB,CAA8BC,GAA9B,CAAkC,SAAAC,MAAM,CAAI,CACxC,GAAMC,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAd,CACA,GAAIF,KAAJ,CAAW,CACPD,MAAM,CAACJ,OAAP,CAAeQ,aAAf,CAA+BH,KAA/B,CACH,CACD,MAAOD,CAAAA,MAAP,CACH,CAND,EAQAN,QAAQ,CAACG,YAAT,CAAsBQ,QAAtB,CAA+BN,GAA/B,CACI,SAAAM,QAAQ,QAAIA,CAAAA,QAAJ,EADZ,0FAEI,iBAAMC,KAAN,+KACUC,WADV,CACwBD,KAAK,CAACN,MAD9B,MAEQ,CAAAM,KAAK,OAAL,EAAAA,KAAK,SAAL,yBAAAA,KAAK,CAAED,QAAP,0DAAiBG,MAAjB,IAA4B,GAFpC,0BAGQD,WAAW,CAACE,IAAZ,CAAiB,IAAjB,CAHR,sBAI+Bf,CAAAA,QAAQ,CAACgB,GAAT,CAAa,oBAAb,CAJ/B,0CAIgBC,IAJhB,qBAIgBA,IAJhB,CAKQ,GAAIA,IAAJ,SAAIA,IAAJ,WAAIA,IAAI,CAAEH,MAAV,CAAkB,CACfN,YAAY,CAACU,OAAb,CAAqB,aAArB,CAAoCD,IAAI,CAACE,WAAzC,EACF,CAPT,gCAQenB,QAAQ,CAACa,WAAD,CARvB,yCAUWO,OAAO,CAACC,MAAR,CAAeT,KAAf,CAVX,yDAFJ,gEAkBA,cAAeZ,CAAAA,QAAf","sourcesContent":["import axios from 'axios';\n\nconst baseURL = 'https://frbots.com/';\n\nexport const ImagePath = `${baseURL}images/`;\n\nconst instance = axios.create({\n    baseURL: `${baseURL}api/`,\n    headers: {\n        'Content-Type': 'application/json',\n    }\n});\n\ninstance.interceptors.request.use(config => {\n    const token = localStorage.getItem('accesstoken');\n    if (token) {\n        config.headers.authorization = token;\n    }\n    return config;\n})\n\ninstance.interceptors.response.use(\n    response => response,\n    async error => {\n        const prevRequest = error.config;\n        if (error?.response?.status === 403) {\n            prevRequest.sent=true;\n            const { data } = await instance.put('/auth/refreshtoken')\n            if (data?.status) {\n               localStorage.setItem('accesstoken', data.accesstoken) \n            }\n            return instance(prevRequest);\n        }\n        return Promise.reject(error);\n    }\n);\n\n\n\nexport default instance"]},"metadata":{},"sourceType":"module"}