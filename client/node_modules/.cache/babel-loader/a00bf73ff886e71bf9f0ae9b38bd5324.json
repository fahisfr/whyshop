{"ast":null,"code":"import _asyncToGenerator from\"/home/frboy/whyshop/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/home/frboy/whyshop/client/node_modules/@babel/runtime/regenerator/index.js\";import axios from'axios';var baseURL='https://frbots.com/';export var ImagePath=function ImagePath(imageId){return\"\".concat(baseURL,\"images/\").concat(imageId,\".jpg\");};var instance=axios.create({baseURL:'https://frbots.com/api',headers:{'Content-Type':'application/json',\"authorization\":localStorage.getItem('accesstoken')?\"\".concat(localStorage.getItem('accesstoken')):''}});instance.interceptors.response.use(function(response){return response;},/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(error){var _error$response;var lastrequest,_yield$instance$put,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:lastrequest=error.config;if(!((error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===403)){_context.next=8;break;}_context.next=4;return instance.put('/auth/refreshtoken');case 4:_yield$instance$put=_context.sent;data=_yield$instance$put.data;localStorage.setItem('accesstoken',data.accesstoken);window.location.reload();case 8:return _context.abrupt(\"return\",Promise.reject(error));case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());export default instance;","map":{"version":3,"sources":["/home/frboy/whyshop/client/src/Axios.js"],"names":["axios","baseURL","ImagePath","imageId","instance","create","headers","localStorage","getItem","interceptors","response","use","error","lastrequest","config","status","put","data","setItem","accesstoken","window","location","reload","Promise","reject"],"mappings":"mOAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,GAAMC,CAAAA,OAAO,CAAG,qBAAhB,CAEA,MAAO,IAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,OAAD,kBAAgBF,OAAhB,mBAAiCE,OAAjC,UAAlB,CAEP,GAAMC,CAAAA,QAAQ,CAAGJ,KAAK,CAACK,MAAN,CAAa,CAC1BJ,OAAO,CAAE,wBADiB,CAE1BK,OAAO,CAAE,CACL,eAAgB,kBADX,CAEL,gBAAiBC,YAAY,CAACC,OAAb,CAAqB,aAArB,YAAwCD,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAxC,EAAgF,EAF5F,CAFiB,CAAb,CAAjB,CAQAJ,QAAQ,CAACK,YAAT,CAAsBC,QAAtB,CAA+BC,GAA/B,CACI,SAAAD,QAAQ,QAAIA,CAAAA,QAAJ,EADZ,0FAEI,iBAAME,KAAN,+KACUC,WADV,CACwBD,KAAK,CAACE,MAD9B,MAEQ,CAAAF,KAAK,OAAL,EAAAA,KAAK,SAAL,yBAAAA,KAAK,CAAEF,QAAP,0DAAiBK,MAAjB,IAA4B,GAFpC,gDAG+BX,CAAAA,QAAQ,CAACY,GAAT,CAAa,oBAAb,CAH/B,0CAGgBC,IAHhB,qBAGgBA,IAHhB,CAIQV,YAAY,CAACW,OAAb,CAAqB,aAArB,CAAoCD,IAAI,CAACE,WAAzC,EACAC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GALR,uCAOWC,OAAO,CAACC,MAAR,CAAeZ,KAAf,CAPX,wDAFJ,gEAeA,cAAeR,CAAAA,QAAf","sourcesContent":["import axios from 'axios';\n\nconst baseURL = 'https://frbots.com/';\n\nexport const ImagePath = (imageId) => `${baseURL}images/${imageId}.jpg`;\n\nconst instance = axios.create({\n    baseURL: 'https://frbots.com/api',\n    headers: {\n        'Content-Type': 'application/json',\n        \"authorization\": localStorage.getItem('accesstoken')? `${localStorage.getItem('accesstoken')}` : '',\n    }\n});\n\ninstance.interceptors.response.use(\n    response => response,\n    async error => {\n        const lastrequest = error.config;\n        if (error?.response?.status === 403) {\n            const { data } = await instance.put('/auth/refreshtoken')\n            localStorage.setItem('accesstoken', data.accesstoken)\n            window.location.reload()\n        }\n        return Promise.reject(error);\n    }\n);\n\n\n\nexport default instance"]},"metadata":{},"sourceType":"module"}