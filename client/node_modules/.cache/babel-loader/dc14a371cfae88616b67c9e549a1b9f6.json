{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport { useDispatch } from 'react-redux';\nimport { login } from './Features/User';\nconst baseURL = 'http://localhost:4000/';\nexport const ImagePath = imageId => `${baseURL}images/${imageId}.jpg`;\n_c = ImagePath;\nconst instance = axios.create({\n  baseURL: 'http://localhost:4000/api/',\n  headers: {\n    'authorization': localStorage.getItem('accesstoken')\n  }\n});\ninstance.interceptors.response.use(response => response, _s(async error => {\n  _s();\n\n  console.log(error, \"p\");\n\n  if (error.response.status === 401 && error.response.data.message === 'token expired') {\n    try {\n      const dispatch = useDispatch();\n      const {\n        data\n      } = await instance.put('/auth/refreshtoken', {\n        withCredentials: true\n      });\n      localStorage.setItem('accesstoken', data.accesstoken);\n      dispatch(login({\n        name: data.name,\n        roel: data.roel,\n        number: data.number,\n        isAthu: true\n      }));\n    } catch (_error) {\n      return Promise.reject(error);\n    }\n  }\n\n  return Promise.reject(error);\n}, \"rgTLoBID190wEKCp9+G8W6F7A5M=\", false, function () {\n  return [useDispatch];\n}));\nexport default instance;\n\nvar _c;\n\n$RefreshReg$(_c, \"ImagePath\");","map":{"version":3,"sources":["/home/frboy/whyshop/cliend/src/Axios.js"],"names":["axios","useDispatch","login","baseURL","ImagePath","imageId","instance","create","headers","localStorage","getItem","interceptors","response","use","error","console","log","status","data","message","dispatch","put","withCredentials","setItem","accesstoken","name","roel","number","isAthu","_error","Promise","reject"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,KAAT,QAAsB,iBAAtB;AAEA,MAAMC,OAAO,GAAG,wBAAhB;AAEA,OAAO,MAAMC,SAAS,GAAIC,OAAD,IAAc,GAAEF,OAAQ,UAASE,OAAQ,MAA3D;KAAMD,S;AAEb,MAAME,QAAQ,GAAGN,KAAK,CAACO,MAAN,CAAa;AAC1BJ,EAAAA,OAAO,EAAE,4BADiB;AAE1BK,EAAAA,OAAO,EAAE;AACL,qBAAiBC,YAAY,CAACC,OAAb,CAAqB,aAArB;AADZ;AAFiB,CAAb,CAAjB;AAOAJ,QAAQ,CAACK,YAAT,CAAsBC,QAAtB,CAA+BC,GAA/B,CACID,QAAQ,IAAIA,QADhB,KAEI,MAAME,KAAN,IAAe;AAAA;;AACXC,EAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ,EAAkB,GAAlB;;AACA,MAAIA,KAAK,CAACF,QAAN,CAAeK,MAAf,KAA0B,GAA1B,IAAiCH,KAAK,CAACF,QAAN,CAAeM,IAAf,CAAoBC,OAApB,KAAgC,eAArE,EAAsF;AAClF,QAAI;AACA,YAAMC,QAAQ,GAAGnB,WAAW,EAA5B;AACA,YAAM;AAAEiB,QAAAA;AAAF,UAAW,MAAMZ,QAAQ,CAACe,GAAT,CAAa,oBAAb,EAAmC;AAAEC,QAAAA,eAAe,EAAE;AAAnB,OAAnC,CAAvB;AACAb,MAAAA,YAAY,CAACc,OAAb,CAAqB,aAArB,EAAoCL,IAAI,CAACM,WAAzC;AACAJ,MAAAA,QAAQ,CAAClB,KAAK,CAAC;AAAEuB,QAAAA,IAAI,EAAEP,IAAI,CAACO,IAAb;AAAmBC,QAAAA,IAAI,EAAER,IAAI,CAACQ,IAA9B;AAAoCC,QAAAA,MAAM,EAAET,IAAI,CAACS,MAAjD;AAAyDC,QAAAA,MAAM,EAAE;AAAjE,OAAD,CAAN,CAAR;AACH,KALD,CAKE,OAAOC,MAAP,EAAe;AACb,aAAOC,OAAO,CAACC,MAAR,CAAejB,KAAf,CAAP;AACH;AACJ;;AACD,SAAOgB,OAAO,CAACC,MAAR,CAAejB,KAAf,CAAP;AACH,CAfL;AAAA,UAMiCb,WANjC;AAAA;AAoBA,eAAeK,QAAf","sourcesContent":["import axios from 'axios';\nimport { useDispatch } from 'react-redux'\nimport { login } from './Features/User'\n\nconst baseURL = 'http://localhost:4000/';\n\nexport const ImagePath = (imageId) => `${baseURL}images/${imageId}.jpg`;\n\nconst instance = axios.create({\n    baseURL: 'http://localhost:4000/api/',\n    headers: {\n        'authorization': localStorage.getItem('accesstoken'),\n    }\n   \n});\ninstance.interceptors.response.use(\n    response => response,\n    async error => {\n        console.log(error,\"p\")\n        if (error.response.status === 401 && error.response.data.message === 'token expired') {\n            try {\n                const dispatch = useDispatch()\n                const { data } = await instance.put('/auth/refreshtoken', { withCredentials: true})\n                localStorage.setItem('accesstoken', data.accesstoken);\n                dispatch(login({ name: data.name, roel: data.roel, number: data.number, isAthu: true }))\n            } catch (_error) {\n                return Promise.reject(error)\n            }\n        }\n        return Promise.reject(error);\n    }\n);\n\n\n\nexport default instance"]},"metadata":{},"sourceType":"module"}