{"ast":null,"code":"import _defineProperty from\"/home/frboy/whyshop/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _asyncToGenerator from\"/home/frboy/whyshop/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _extraReducers;import _regeneratorRuntime from\"/home/frboy/whyshop/client/node_modules/@babel/runtime/regenerator/index.js\";import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import Axios from'../Axios';export var fetchUser=createAsyncThunk('user/fetchUser',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userId){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Axios.get('/auth').then(function(res){return res.data;});case 2:response=_context.sent;return _context.abrupt(\"return\",response);case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());export var userSlice=createSlice({name:'user',initialState:{userInfo:{name:'',number:'',role:'',isAuth:false},error:'',loading:false},reducers:{login:function login(state,action){state.userInfo=action.payload;},logout:function logout(state,action){state.userInfo={name:'',number:'',role:'',isAuth:false};}},extraReducers:(_extraReducers={},_defineProperty(_extraReducers,fetchUser.fulfilled,function(state,action){state.userInfo=action.payload.UserInfo?action.payload.UserInfo:state.userInfo.isAuth=false;state.loading=false;}),_defineProperty(_extraReducers,fetchUser.pending,function(state,action){state.loading=true;}),_defineProperty(_extraReducers,fetchUser.rejected,function(state,action){state.error=action.error;state.loading=false;}),_extraReducers)});var _userSlice$actions=userSlice.actions,login=_userSlice$actions.login,logout=_userSlice$actions.logout;export{login,logout};export default userSlice.reducer;","map":{"version":3,"sources":["/home/frboy/whyshop/client/src/Features/User.js"],"names":["createSlice","createAsyncThunk","Axios","fetchUser","userId","get","then","res","data","response","userSlice","name","initialState","userInfo","number","role","isAuth","error","loading","reducers","login","state","action","payload","logout","extraReducers","fulfilled","UserInfo","pending","rejected","actions","reducer"],"mappings":"wWAAA,OAASA,WAAT,CAAqBC,gBAArB,KAA6C,kBAA7C,CACA,MAAOC,CAAAA,KAAP,KAAkB,UAAlB,CAGA,MAAO,IAAMC,CAAAA,SAAS,CAAGF,gBAAgB,CAAC,gBAAD,0FAAmB,iBAAOG,MAAP,qJACjCF,CAAAA,KAAK,CAACG,GAAN,CAAU,OAAV,EAAmBC,IAAnB,CAAwB,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAACC,IAAN,EAA3B,CADiC,QAClDC,QADkD,+CAEjDA,QAFiD,wDAAnB,+DAAlC,CAIP,MAAO,IAAOC,CAAAA,SAAS,CAAGV,WAAW,CAAC,CAClCW,IAAI,CAAE,MAD4B,CAElCC,YAAY,CAAE,CACVC,QAAQ,CAAE,CACNF,IAAI,CAAE,EADA,CAENG,MAAM,CAAE,EAFF,CAGNC,IAAI,CAAE,EAHA,CAINC,MAAM,CAAE,KAJF,CADA,CAOVC,KAAK,CAAE,EAPG,CAQVC,OAAO,CAAE,KARC,CAFoB,CAYlCC,QAAQ,CAAE,CACNC,KAAK,CAAE,eAACC,KAAD,CAAQC,MAAR,CAAmB,CACtBD,KAAK,CAACR,QAAN,CAAiBS,MAAM,CAACC,OAAxB,CAEH,CAJK,CAKNC,MAAM,CAAE,gBAACH,KAAD,CAAQC,MAAR,CAAmB,CACvBD,KAAK,CAACR,QAAN,CAAiB,CACbF,IAAI,CAAE,EADO,CAEbG,MAAM,CAAE,EAFK,CAGbC,IAAI,CAAE,EAHO,CAIbC,MAAM,CAAE,KAJK,CAAjB,CAMH,CAZK,CAZwB,CAyB/BS,aAAa,mDACXtB,SAAS,CAACuB,SADC,CACW,SAACL,KAAD,CAAQC,MAAR,CAAmB,CACtCD,KAAK,CAACR,QAAN,CAAgBS,MAAM,CAACC,OAAP,CAAeI,QAAf,CAAyBL,MAAM,CAACC,OAAP,CAAeI,QAAxC,CAAmDN,KAAK,CAACR,QAAN,CAAeG,MAAf,CAAsB,KAAzF,CACAK,KAAK,CAACH,OAAN,CAAgB,KAAhB,CACH,CAJW,iCAKXf,SAAS,CAACyB,OALC,CAKS,SAACP,KAAD,CAAQC,MAAR,CAAmB,CACpCD,KAAK,CAACH,OAAN,CAAe,IAAf,CAEH,CARW,iCASXf,SAAS,CAAC0B,QATC,CASU,SAACR,KAAD,CAAQC,MAAR,CAAmB,CACrCD,KAAK,CAACJ,KAAN,CAAcK,MAAM,CAACL,KAArB,CACAI,KAAK,CAACH,OAAN,CAAgB,KAAhB,CACH,CAZW,iBAzBkB,CAAD,CAA9B,CAyCA,uBAAuBR,SAAS,CAACoB,OAAjC,CAAOV,KAAP,oBAAOA,KAAP,CAAaI,MAAb,oBAAaA,MAAb,C,qBAEP,cAAed,CAAAA,SAAS,CAACqB,OAAzB","sourcesContent":["import { createSlice,createAsyncThunk } from '@reduxjs/toolkit'\nimport Axios from '../Axios'\n\n\nexport const fetchUser = createAsyncThunk('user/fetchUser', async (userId) => {\n    const response = await Axios.get('/auth').then(res=>res.data)\n    return response\n})\nexport const  userSlice = createSlice({\n    name: 'user',\n    initialState: {\n        userInfo: {\n            name: '',\n            number: '',\n            role: '',\n            isAuth: false,\n        },\n        error: '',\n        loading: false,\n    },\n    reducers: {\n        login: (state, action) => {\n            state.userInfo = action.payload;\n\n        },\n        logout: (state, action) => {\n            state.userInfo = {\n                name: '',\n                number: '',\n                role: '',\n                isAuth: false,\n            }\n        }\n    }, extraReducers: {\n        [fetchUser.fulfilled]: (state, action) => {\n            state.userInfo= action.payload.UserInfo? action.payload.UserInfo : state.userInfo.isAuth=false\n            state.loading = false;\n        },\n        [fetchUser.pending]: (state, action) => {\n            state.loading= true;\n            \n        },\n        [fetchUser.rejected]: (state, action) => {\n            state.error = action.error;\n            state.loading = false;\n        }\n    }\n})\n\nexport const {login,logout} = userSlice.actions;\n\nexport default userSlice.reducer;"]},"metadata":{},"sourceType":"module"}