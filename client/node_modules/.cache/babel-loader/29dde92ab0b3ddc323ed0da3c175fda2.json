{"ast":null,"code":"import _regeneratorRuntime from\"/home/frboy/whyshop/cliend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/frboy/whyshop/cliend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/frboy/whyshop/cliend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useNavigate}from'react-router-dom';import'./Checkout.css';import Axios from'../../Axios';// import { useSelector } from 'react-redux'\nimport{useDispatch}from'react-redux';import{Checkout}from'../../Features/Cart';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function loadRazorpay(src){return new Promise(function(resolve){var script=document.createElement(\"script\");script.src=src;document.body.appendChild(script);script.onload=function(){resolve(true);};script.onerror=function(){resolve(false);};document.body.appendChild(script);});}function Order(){var navigate=useNavigate();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setname=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),number=_useState4[0],setnumber=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),city=_useState6[0],setcity=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),landmark=_useState8[0],setlademark=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),paymentType=_useState10[0],setpaymentType=_useState10[1];var dispatch=useDispatch();function displayRazor(_x){return _displayRazor.apply(this,arguments);}function _displayRazor(){_displayRazor=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(Order){var res,options,PaymentObject;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return loadRazorpay(\"https://checkout.razorpay.com/v1/checkout.js\");case 2:res=_context.sent;if(res){_context.next=8;break;}alert(\"Razorpay is not loaded are you offline\");return _context.abrupt(\"return\");case 8:options={\"key\":\"rzp_test_lFLdi5y9B4LWvU\",// Enter the Key ID generated from the Dashboard\n\"amount\":Order.amount,// Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise\n\"currency\":\"INR\",\"name\":\"Acme Corp\",\"description\":\"Test Transaction\",\"image\":\"https://example.com/your_logo\",\"order_id\":Order.id,\"handler\":function handler(response){Axios.post('order/verifypayment',{order:response}).then(function(res){if(res.data.status){alert(\"Payment Successfull\");dispatch(Checkout());navigate('/');}else{alert(\"Payment Failed\");}});},\"callback_url\":\"https://eneqd3r9zrjok.x.pipedream.net/\",\"prefill\":{\"name\":\"Fahis\",\"email\":\"TestMode.kumar@example.com\",\"contact\":\"9999999999\"},\"notes\":{\"address\":\"Razorpay Corporate Office\"},\"theme\":{\"color\":\"#3399cc\"}};PaymentObject=new window.Razorpay(options);PaymentObject.open();case 11:case\"end\":return _context.stop();}}},_callee);}));return _displayRazor.apply(this,arguments);}function OrderNow(e){e.preventDefault();Axios.post('cart/place-order',{name:name,number:number,city:city,lademark:landmark,paymentType:paymentType}).then(function(res){if(res.data.razorpay){displayRazor(res.data.order);}else if(res.data.status){alert(\"Order Placed Successfully\");dispatch(Checkout());navigate('/');}}).catch(function(err){alert(err.data.message);});}return/*#__PURE__*/_jsx(\"div\",{className:\"checkout-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-form\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"checkout-from-tital\",children:\"Checkout\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:OrderNow,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-form-input\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:name,onChange:function onChange(e){return setname(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-form-input\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:number,onChange:function onChange(e){return setnumber(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-form-input\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"City\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"selectList\",id:\"selectList\",value:city,onChange:function onChange(e){return setcity(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select City\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vengara\",children:\"Vengara\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Oorakam\",children:\"Oorakam\"}),/*#__PURE__*/_jsx(\"option\",{value:\"option 3\",children:\"karibele\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-form-input\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Landmark\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:landmark,onChange:function onChange(e){return setlademark(e.target.value);}})]}),/*#__PURE__*/_jsx(\"label\",{children:\"Paymen Type\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"order-billinginfo\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"paymentType\",value:\"Online\",checked:paymentType==='Online',onChange:function onChange(e){return setpaymentType(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{children:\"Online\"}),/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"paymentType\",value:\"COD\",checked:paymentType==='COD',onChange:function onChange(e){return setpaymentType(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{children:\"Cash On Delivery\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"checkout-form-button\",children:/*#__PURE__*/_jsx(\"button\",{onClick:OrderNow,className:\"order-button\",children:\"Order Now\"})})]})]})});}export default Order;","map":{"version":3,"sources":["/home/frboy/whyshop/cliend/src/Page/Checkout/Checkout.js"],"names":["React","useState","useNavigate","Axios","useDispatch","Checkout","loadRazorpay","src","Promise","resolve","script","document","createElement","body","appendChild","onload","onerror","Order","navigate","name","setname","number","setnumber","city","setcity","landmark","setlademark","paymentType","setpaymentType","dispatch","displayRazor","res","alert","options","amount","id","response","post","order","then","data","status","PaymentObject","window","Razorpay","open","OrderNow","e","preventDefault","lademark","razorpay","catch","err","message","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport './Checkout.css'\nimport Axios from '../../Axios'\n// import { useSelector } from 'react-redux'\nimport {  useDispatch } from 'react-redux'\nimport { Checkout } from '../../Features/Cart'\n\nfunction loadRazorpay(src) {\n \n    return new Promise(resolve => {\n        const script = document.createElement(\"script\");\n        script.src = src\n        document.body.appendChild(script);\n        script.onload = () => {\n            resolve(true);\n\n        }\n        script.onerror = () => {\n            resolve(false);\n        }\n        document.body.appendChild(script);\n    })\n}\n\nfunction Order() {\n    const navigate = useNavigate()\n    const [name, setname] = useState('')\n    const [number, setnumber] = useState()\n    const [city, setcity] = useState('')\n    const [landmark, setlademark] = useState('')\n    const [paymentType, setpaymentType] = useState('')\n    const dispatch = useDispatch()\n    async function displayRazor(Order) {\n        const res = await loadRazorpay(\"https://checkout.razorpay.com/v1/checkout.js\")\n        if (!res) {\n            alert(\"Razorpay is not loaded are you offline\")\n            return\n        } else {\n            var options = {\n                \"key\": \"rzp_test_lFLdi5y9B4LWvU\", // Enter the Key ID generated from the Dashboard\n                \"amount\": Order.amount, // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise\n                \"currency\": \"INR\",\n                \"name\": \"Acme Corp\",\n                \"description\": \"Test Transaction\",\n                \"image\": \"https://example.com/your_logo\",\n                \"order_id\": Order.id,\n                \"handler\": function (response) {\n                    Axios.post('order/verifypayment', { order: response }).then(res => {\n                        if (res.data.status) {\n                            alert(\"Payment Successfull\")\n                            dispatch(Checkout())\n                            navigate('/')\n                        } else {\n                            alert(\"Payment Failed\")\n                        }\n                    })\n                },\n                \"callback_url\": \"https://eneqd3r9zrjok.x.pipedream.net/\",\n                \"prefill\": {\n                    \"name\": \"Fahis\",\n                    \"email\": \"TestMode.kumar@example.com\",\n                    \"contact\": \"9999999999\"\n                },\n                \"notes\": {\n                    \"address\": \"Razorpay Corporate Office\"\n                },\n                \"theme\": {\n                    \"color\": \"#3399cc\"\n                }\n            };\n\n            const PaymentObject = new window.Razorpay(options);\n            PaymentObject.open();\n        }\n    }\n    function OrderNow(e) {\n        e.preventDefault()\n        Axios.post('cart/place-order', { name: name, number: number, city: city, lademark: landmark, paymentType: paymentType }).then(res => {\n            if (res.data.razorpay) {\n                displayRazor(res.data.order)\n            \n            } else if (res.data.status) {\n                alert(\"Order Placed Successfully\")\n                dispatch(Checkout())\n                navigate('/')\n                \n            }\n        }).catch(err => {\n            alert(err.data.message)\n        })\n    }\n\n\n    return (\n\n        <div className='checkout-container'>\n            <div className='checkout-form'>\n                <h1 className='checkout-from-tital'>Checkout</h1>\n                <form onSubmit={OrderNow}>\n                    <div className='checkout-form-input'>\n                        <label>Name</label>\n                        <input type='text' value={name} onChange={(e) => setname(e.target.value)}></input>\n                    </div>\n                    <div className='checkout-form-input'>\n                        <label>Number</label>\n                        <input type='text' value={number} onChange={(e) => setnumber(e.target.value)}></input>\n                    </div>\n                    <div className='checkout-form-input'>\n                        <label>City</label>\n                        <select name=\"selectList\" id=\"selectList\" value={city}\n                            onChange={(e) => setcity(e.target.value)}>\n\n                            <option value=\"\">Select City</option>\n                            <option value=\"vengara\">Vengara</option>\n                            <option value=\"Oorakam\">Oorakam</option>\n                            <option value=\"option 3\">karibele</option>\n                        </select>\n                    </div>\n                    <div className='checkout-form-input'>\n                        <label>Landmark</label>\n                        <input type='text' value={landmark} onChange={(e) => setlademark(e.target.value)}></input>\n                    </div>\n\n                    <label>Paymen Type</label>\n                    <div className='order-billinginfo'>\n                        <input type=\"radio\" name=\"paymentType\" value=\"Online\"\n                            checked={paymentType === 'Online'}\n                            onChange={(e) => setpaymentType(e.target.value)} />\n                        <label>Online</label>\n                        <input type=\"radio\" name=\"paymentType\" value=\"COD\"\n                            checked={paymentType === 'COD'}\n                            onChange={(e) => setpaymentType(e.target.value)} />\n                        <label>Cash On Delivery</label>\n                    </div>\n                    <div className='checkout-form-button'>\n                        <button onClick={OrderNow} className='order-button'>Order Now</button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    )\n}\n\n\n\nexport default Order\n"]},"metadata":{},"sourceType":"module"}